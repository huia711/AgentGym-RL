# AgentGym-RLï¼šé€šè¿‡å¤šè½®å¼ºåŒ–å­¦ä¹ è®­ç»ƒç”¨äºé•¿æ—¶åºå†³ç­–çš„LLMæ™ºèƒ½ä½“
<p align="center">
  ğŸ“ƒ <a href="https://arxiv.org/abs/2509.08755" target="_blank">è®ºæ–‡</a > â€¢ ğŸŒ <a href="https://agentgym-rl.github.io/" target="_blank">é¡¹ç›®ä¸»é¡µ</a > â€¢ ğŸ¤— <a href="https://huggingface.co/datasets/AgentGym/AgentGym-RL-Data-ID" target="_blank">AgentGym-RL-Data-ID</a >
</p >

AgentGym-RL æ˜¯ä¸€ä¸ªç”¨äºé€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰è®­ç»ƒå…·å¤‡**å¤šè½®**äº¤äº’å¼å†³ç­–èƒ½åŠ›çš„ LLM æ™ºèƒ½ä½“çš„æ–°æ¡†æ¶ã€‚å®ƒæ¶µç›–äº†ç§ç±»å¹¿æ³›çš„**çœŸå®ä¸–ç•Œåœºæ™¯**ï¼Œå¹¶æ”¯æŒä¸»æµ RL ç®—æ³•ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¡†æ¶ä¸æ–¹æ³•æ˜¾è‘—æå‡äº†å¼€æº 7B è§„æ¨¡æ¨¡å‹çš„èƒ½åŠ›ï¼Œåœ¨è·¨è¶Šå¤šæ ·ç¯å¢ƒçš„**27 ä¸ªä»»åŠ¡**ä¸Šï¼Œå®ç°äº†**åŒ¹æ•Œç”šè‡³è¶…è¶Šå•†ä¸šæ¨¡å‹**çš„è¡¨ç°ã€‚

![](./assets/main_performance.jpg)

## ğŸ”” æœ€æ–°åŠ¨æ€

- **ğŸ‰[2025-09-10]** ä½ å¯ä»¥ä¸º AgentGym å¼€å‘è‡ªå®šä¹‰ç¯å¢ƒå¹¶è¿›è¡Œ RL è®­ç»ƒï¼æ•™ç¨‹è§[è¿™é‡Œ](https://github.com/WooooDyy/AgentGym/blob/main/docs/tutorials/en/05-2nd-Development.md)ã€‚
- **ğŸ¥³[2025-09-10]** æˆ‘ä»¬çš„è®ºæ–‡å·²åœ¨ arXiv å‘å¸ƒï¼š[AgentGym-RL: Training LLM Agents for Long-Horizon Decision Making through Multi-Turn Reinforcement Learning](https://arxiv.org/abs/2509.08755)
- **ğŸº[2025-09-10]** æˆ‘ä»¬çš„ RL æ•°æ®é›†ä¸åŸºå‡†å·²åœ¨ Hugging Face å¼€æ”¾ï¼š[AgentGym-RL-Data-ID](https://huggingface.co/datasets/AgentGym/AgentGym-RL-Data-ID)

## ğŸŒŸ æ¦‚è¿°

é¢å‘å¤æ‚çœŸå®ä¸–ç•Œä»»åŠ¡ï¼ŒåŸ¹å…»èƒ½å¤Ÿåšå‡ºä¸€ç³»åˆ—æ™ºèƒ½å†³ç­–çš„è‡ªä¸» LLM æ™ºèƒ½ä½“ï¼Œæ˜¯å¿«é€Ÿå‘å±•çš„å‰æ²¿æ–¹å‘ã€‚ä»…ä¾èµ–äººç±»ç¤ºèŒƒè¿›è¡Œè¡Œä¸ºå…‹éš†å¯ä»¥è®©æ™ºèƒ½ä½“â€œä¼šåšäº‹â€ï¼Œä½†å¾ˆéš¾å¸¦æ¥çœŸæ­£çš„çªç ´ã€‚æ­£å¦‚ Richard Sutton å¼ºè°ƒçš„é‚£æ ·ï¼ŒçœŸæ­£æ¨åŠ¨æ™ºèƒ½ä½“è¿›æ­¥çš„æ˜¯å…¶é€šè¿‡æ¢ç´¢å¹¶ä¸ç¯å¢ƒäº¤äº’è€Œè·å¾—çš„çŸ¥è¯†ã€æŠ€èƒ½ä¸ç»éªŒã€‚å› æ­¤ï¼Œä¸€ä¸ªæå…·å‰æ™¯çš„è·¯å¾„æ˜¯ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ¥è®­ç»ƒè¿™ç±»æ™ºèƒ½ä½“ã€‚

å¤šæ•°ç°æœ‰ç ”ç©¶ä»å±€é™äºæ•°å­¦ã€ä»£ç ç­‰å•è½®ä»»åŠ¡ã€‚è¿‘æœŸå°† RL æ‰©å±•åˆ°è®­ç»ƒå…·å¤‡å¤šè½®èƒ½åŠ›çš„ LLM æ™ºèƒ½ä½“çš„å°è¯•ï¼Œé¢ä¸´æ˜¾è‘—æŒ‘æˆ˜ï¼š

- **ä»»åŠ¡å¤æ‚åº¦ä¸ç¯å¢ƒå¤šæ ·æ€§å—é™ã€‚** åœ¨å¼ºåŒ–å­¦ä¹ æ—¶ä»£ï¼Œç¯å¢ƒçš„é‡è¦æ€§æ„ˆå‘å‡¸æ˜¾ã€‚åªåœ¨ç©å…·ç¯å¢ƒè¡¨ç°è‰¯å¥½çš„æ™ºèƒ½ä½“éš¾ä»¥è¿ç§»åˆ°çœŸå®åœºæ™¯ï¼›è€Œç¯å¢ƒçš„å¤šæ ·æ€§æ˜¯æ³›åŒ–èƒ½åŠ›çš„å‰æã€‚
- **ç¨³å®šé«˜æ•ˆä¼˜åŒ–å›°éš¾ã€‚** å¤šè½®äº¤äº’æ˜¾è‘—æ‰©å±•äº†æœç´¢ç©ºé—´å¹¶å¢åŠ è®­ç»ƒä¿¡å·çš„æ–¹å·®ï¼Œä½¿å¾—æ¢ç´¢ä¸åˆ©ç”¨ä¹‹é—´çš„å¹³è¡¡æ›´å…·æŒ‘æˆ˜ã€‚

ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº† **AgentGym-RL**â€”â€”ä¸€ä¸ªç”¨äºé€šè¿‡ RL è®­ç»ƒå…·å¤‡**å¤šè½®**äº¤äº’å¼å†³ç­–èƒ½åŠ›çš„ LLM æ™ºèƒ½ä½“çš„æ–°æ¡†æ¶ã€‚å®ƒæ¶µç›–å¤šç§**çœŸå®ä¸–ç•Œåœºæ™¯**å¹¶æ”¯æŒä¸»æµ RL ç®—æ³•ï¼Œä¸º**ç»éªŒæ—¶ä»£**çš„ç ”ç©¶ä¸å®è·µå¥ å®šåŸºç¡€ã€‚

![](./assets/AgentGym-RL-main.png)

æ­¤å¤–ï¼Œä¸ºç¼“è§£æ¢ç´¢-åˆ©ç”¨æƒè¡¡å¹¶æå‡æ™ºèƒ½ä½“ RL è®­ç»ƒä¸­çš„ä¼˜åŒ–ç¨³å®šæ€§ï¼Œæˆ‘ä»¬æå‡º **ScalingInter-RL** æ–¹æ³•ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€æ­¥æ‰©å±•æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’æ—¶åŸŸã€‚è·¨ç¯å¢ƒå®éªŒæ˜¾ç¤ºï¼Œç»“åˆ AgentGym-RL æ¡†æ¶ä¸ ScalingInter-RL ç®—æ³•ï¼Œå¯ä»¥è·å¾—ç¨³å®šã€æŒç»­ä¸”å¹…åº¦å¯è§‚çš„è¡Œä¸ºæå‡ã€‚

åŒæ—¶ï¼Œä¸ºä¾¿äºæ·±å…¥æ¢æŸ¥æ•°æ®ä¸æ¨¡å‹è¡Œä¸ºï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª**å¯è§†åŒ–çš„äº¤äº’å¼ç”¨æˆ·ç•Œé¢**ï¼Œæ”¯æŒå¯¹å®Œæ•´äº¤äº’è½¨è¿¹çš„å›æ”¾ä¸åˆ†æï¼ŒåŠ é€Ÿè¿­ä»£å¼çš„ç»éªŒç ”ç©¶ã€‚

![](./assets/env.jpg)

## ğŸ“– ç›®å½•

- [AgentGym-RLï¼šé€šè¿‡å¤šè½®å¼ºåŒ–å­¦ä¹ è®­ç»ƒç”¨äºé•¿æ—¶åºå†³ç­–çš„LLMæ™ºèƒ½ä½“](#agentgym-rlé€šè¿‡å¤šè½®å¼ºåŒ–å­¦ä¹ è®­ç»ƒç”¨äºé•¿æ—¶åºå†³ç­–çš„llmæ™ºèƒ½ä½“)
  * [ğŸ”” æœ€æ–°åŠ¨æ€](#-æœ€æ–°åŠ¨æ€)
  * [ğŸŒŸ æ¦‚è¿°](#-æ¦‚è¿°)
  * [åŠŸèƒ½](#åŠŸèƒ½)
    + [AgentGym-RL çš„æ¨¡å—åŒ–ç³»ç»Ÿè®¾è®¡](#agentgym-rl-çš„æ¨¡å—åŒ–ç³»ç»Ÿè®¾è®¡)
    + [ç¯å¢ƒ](#ç¯å¢ƒ)
    + [åè®­ç»ƒç­–ç•¥](#åè®­ç»ƒç­–ç•¥)
    + [ScalingInter-RLï¼šé¢å‘æ™ºèƒ½ä½“RLçš„æ¸è¿›å¼äº¤äº’æ‰©å±•](#scalinginter-rlé¢å‘æ™ºèƒ½ä½“rlçš„æ¸è¿›å¼äº¤äº’æ‰©å±•)
    + [Verl çš„æ‰©å±•](#verl-çš„æ‰©å±•)
  * [æ€§èƒ½](#æ€§èƒ½)
  * [è¿è¡Œæ•™ç¨‹](#è¿è¡Œæ•™ç¨‹)
    + [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
    + [è®­ç»ƒ](#è®­ç»ƒ)
    + [è¯„æµ‹](#è¯„æµ‹)
    + [å¯è§†åŒ–ç”¨æˆ·ç•Œé¢](#å¯è§†åŒ–ç”¨æˆ·ç•Œé¢)
  * [è‡´è°¢](#è‡´è°¢)
  * [è”ç³»](#è”ç³»)
  * [å¼•ç”¨](#å¼•ç”¨)

## åŠŸèƒ½

### AgentGym-RL çš„æ¨¡å—åŒ–ç³»ç»Ÿè®¾è®¡

æˆ‘ä»¬é‡‡ç”¨æ¨¡å—åŒ–ã€è§£è€¦çš„è®¾è®¡æ¥å®ç° AgentGym-RLï¼Œå°†å…¶ç»„ç»‡ä¸ºä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š

- **ç¯å¢ƒæ¨¡å—**ï¼šé€šè¿‡æ ‡å‡†åŒ–çš„æœåŠ¡ç«¯-å®¢æˆ·ç«¯æ¶æ„ã€ç»Ÿä¸€çš„ HTTP åè®®ä¸å¹¶è¡Œè¯·æ±‚ï¼Œæä¾›å¤šæ ·åŒ–åœºæ™¯ã€‚
- **æ™ºèƒ½ä½“æ¨¡å—**ï¼šå°è£…æ™ºèƒ½ä½“åœ¨å¤šè½®äº¤äº’ä¸­çš„æ¨ç†ä¸å†³ç­–è¿‡ç¨‹ï¼Œæ”¯æŒé•¿æ—¶åºè§„åˆ’ã€è‡ªæˆ‘åæ€ç­‰é«˜çº§æœºåˆ¶ã€‚
- **è®­ç»ƒæ¨¡å—**ï¼šå®ç°å¼ºåŒ–å­¦ä¹ æµæ°´çº¿ä¸å…¶ä»–è®­ç»ƒæ–¹æ³•ï¼Œç”¨äºä¼˜åŒ–æ™ºèƒ½ä½“ç­–ç•¥ã€‚

![](./assets/pseudo.jpg)

### ç¯å¢ƒ

* **ç½‘é¡µå¯¼èˆªï¼ˆWeb Navigationï¼‰**ï¼šåŒ…å« **WebArena**ï¼Œä¸€ä¸ªçœŸå®ä¸”å¯å¤ç°çš„ç½‘é¡µç¯å¢ƒï¼Œæ¶µç›–äº’è”ç½‘ä¸Šå¸¸è§çš„ 4 å¤§åŸŸï¼šåœ¨çº¿è´­ç‰©ã€è®¨è®ºè®ºå›ã€åä½œå¼€å‘ä¸ä¸šåŠ¡å†…å®¹ç®¡ç†ã€‚
* **æ·±åº¦æœç´¢ï¼ˆDeep Searchï¼‰**ï¼šåŸºäº **Search-R1** æ‰©å±•ï¼Œæä¾› RAG å‹ç¯å¢ƒï¼Œä½¿ LLM èƒ½ä¸æœç´¢å¼•æ“äº¤äº’ï¼Œå®Œæˆå¤šè½®æ£€ç´¢ä¸æ¨ç†ä»»åŠ¡ã€‚
* **æ•°å­—æ¸¸æˆï¼ˆDigital Gamesï¼‰**ï¼šåŒ…å« **TextCraft**ï¼Œä¸€æ¬¾æ–‡æœ¬å¼åˆæˆæ¸¸æˆï¼Œæ™ºèƒ½ä½“é€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ä¸ä»»åŠ¡è§„åˆ’å®Œæˆç›®æ ‡ã€‚
* **å…·èº«ä»»åŠ¡ï¼ˆEmbodied Tasksï¼‰**ï¼šåŒ…å« **BabyAI**ï¼Œåœ¨å¯æ§çš„æ …æ ¼ä¸–ç•Œä¸­é€šè¿‡æ–‡æœ¬æŒ‡ä»¤è¿›è¡Œå…·èº«æ¨ç†çš„ä»¿çœŸç¯å¢ƒã€‚
* **ç§‘å­¦ä»»åŠ¡ï¼ˆScientific Tasksï¼‰**ï¼šåŒ…å« **SciWorld**ï¼Œä¸€ä¸ªç§‘å­¦æ¢ç´¢æ¨¡æ‹Ÿå™¨ï¼Œæ™ºèƒ½ä½“é€šè¿‡æ–‡æœ¬é©±åŠ¨çš„æ¨ç†å¾ªç¯æ¥è¿›è¡Œç§‘å­¦å®éªŒã€‚

### åè®­ç»ƒç­–ç•¥

AgentGym-RL æ”¯æŒä¸€ç³»åˆ—ä¸»æµåœ¨çº¿ RL ç®—æ³•ï¼š**PPOã€GRPOã€RLOOã€REINFORCE++**ã€‚

é™¤åœ¨çº¿ RL å¤–ï¼ŒAgentGym-RL ä¹Ÿæ”¯æŒå¤šç§äº’è¡¥è®­ç»ƒèŒƒå¼ï¼š**SFTã€DPOã€AgentEvol**ã€‚

### ScalingInter-RLï¼šé¢å‘æ™ºèƒ½ä½“RLçš„æ¸è¿›å¼äº¤äº’æ‰©å±•

ScalingInter-RL æ˜¯ä¸€ç§åœ¨ç¡®ä¿ä¼˜åŒ–ç¨³å®šæ€§çš„åŒæ—¶å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨çš„è®­ç»ƒæ–¹æ³•ã€‚å…¶æ ¸å¿ƒæ˜¯**æ¸è¿›å¼æ—¶åŸŸæ‰©å±•ç­–ç•¥**ï¼Œåœ¨ RL è¿‡ç¨‹ä¸­è‡ªé€‚åº”åœ°è°ƒæ•´äº¤äº’è½®æ¬¡ã€‚

![](./assets/ScalingInter-RL-Method.png)

æˆ‘ä»¬ä»¥è¾ƒçŸ­çš„äº¤äº’æ—¶åŸŸèµ·æ­¥ï¼Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿé«˜æ•ˆåˆ©ç”¨å·²æœ‰ç­–ç•¥ï¼Œåœ¨ç®€å•ä»»åŠ¡ä¸Šå¿«é€Ÿè·å¾—æ—©æœŸèƒ½åŠ›ï¼Œä¸ºæ›´æ·±å±‚çš„é•¿æ—¶åºæ¨ç†å¥ å®šåŸºç¡€ã€‚éšç€è®­ç»ƒæ¨è¿›ï¼Œæˆ‘ä»¬é€æ­¥å»¶é•¿æ—¶åŸŸï¼Œä¿ƒä½¿æ™ºèƒ½ä½“æ¢ç´¢æ›´é•¿çš„å†³ç­–è·¯å¾„ï¼Œæ¨åŠ¨æ›´é«˜é˜¶è®¤çŸ¥è¡Œä¸ºçš„æ¶Œç°ã€‚

### Verl çš„æ‰©å±•

ä¸ºæ„å»º AgentGym-RLï¼Œæˆ‘ä»¬å¯¹ Verl è¿›è¡Œäº†å¦‚ä¸‹æ”¹é€ ï¼š

1. **ä½¿ç”¨ vLLM å¼•æ“çš„ Rollout**ï¼šä¸ºæ”¯æŒå¤šè½® rollout ä¸é«˜æ•ˆç¯å¢ƒäº¤äº’ï¼Œæˆ‘ä»¬å¼•å…¥ï¼š
   * RolloutHandler ä»¥ç®¡ç†è½¨è¿¹ã€‚`RolloutHandler` èƒ½ä¸ºæ¯è½®ä¸­çš„ç¯å¢ƒè§‚æµ‹ä¸åŠ©æ‰‹åŠ¨ä½œï¼Œæ­£ç¡®è®¡ç®— attention maskã€loss maskã€position idã€sequence idï¼Œå¹¶å¤„ç†å†å²æ¶ˆæ¯ã€çŠ¶æ€ä¸å¥–åŠ±ã€‚
   * EnvClient ä»¥ç®¡ç†äº¤äº’ã€‚`EnvClient` æä¾›å¤šç§æ–¹æ³•ä¾¿äºåœ¨ rollout æœŸé—´ä¸ç¯å¢ƒäº¤äº’ï¼Œä¾‹å¦‚ `observarion()` è·å–å½“å‰è§‚æµ‹ã€`available_actions()` è·å–å½“å‰å¯ç”¨åŠ¨ä½œã€`step()` æ‰§è¡ŒåŠ¨ä½œã€`reset()` é‡ç½®ç¯å¢ƒã€‚ä¸ºæå‡æ•ˆç‡ï¼Œæ¡†æ¶ä¼šå¹¶è¡Œåˆå§‹åŒ–ç¯å¢ƒå¹¶æ”¶é›†è½¨è¿¹ã€‚
2. **ä¼˜åŠ¿å‡½æ•°è®¡ç®—**ï¼šæˆ‘ä»¬ä¿®è®¢äº† Verl åœ¨ REINFORCE++ ä¸ GAE ä¸Šçš„ä¼˜åŠ¿å‡½æ•°å®ç°ï¼Œä»¥ç¡®ä¿åœ¨å•è½®ä¸å¤šè½®åœºæ™¯ä¸‹çš„æ­£ç¡®æ€§ã€‚
3. **è®­ç»ƒä¸­çš„äº¤äº’æ—¶åŸŸè°ƒåº¦**ï¼šä¸ºå®ç° ScalingInter-RLï¼Œæˆ‘ä»¬å¼•å…¥ `RoundScheduler` åœ¨è®­ç»ƒæœŸé—´æ‰©å±•äº¤äº’æ—¶åŸŸã€‚`FixedRoundsScheduler` å›ºå®šæœ€å¤§äº¤äº’è½®æ•°ï¼›`StepRoundsScheduler` ä»¥æ­¥è¿›æ–¹å¼é€æ¸å¢åŠ æ—¶åŸŸï¼Œå®ç°è®­ç»ƒä¸­çš„æ¸è¿›å¼æ‰©å±•ã€‚

## æ€§èƒ½

æˆ‘ä»¬ä»¥ Qwen2.5-3B ä¸ Qwen2.5-7B ä½œä¸ºä¸»è¦éª¨å¹²æ¨¡å‹ã€‚åœ¨**äº”ç±»åœºæ™¯**ä¸Šè¯„ä¼° AgentGym-RL ä¸ ScalingInter-RLï¼Œå¹¶ä¸å¤šç§é—­æºä¸å¼€æºæ¨¡å‹è¿›è¡Œå¯¹æ¯”ã€‚ä»¥ä¸‹å±•ç¤ºäº†åœ¨ WebArena åŸºå‡†ä¸Šçš„ç»“æœï¼Œå…¶ä»–åŸºå‡†çš„ç»“æœè¯·è§æˆ‘ä»¬çš„[è®ºæ–‡](https://arxiv.org/abs/2509.08755)ã€‚

![](./assets/webarena_performance.png)

- **ScalingInter-7B** æ¨¡å‹æ˜¾è‘—**è¶…è¶Šé¡¶çº§å•†ç”¨æ¨¡å‹**ï¼ˆå¦‚ GPT-4oï¼‰ï¼Œå¹¶å¯ä¸æ›´å¤§è§„æ¨¡æ¨¡å‹ï¼ˆå¦‚ DeepSeek-R1-0528ã€Gemini-2.5-Proï¼‰**ç›¸åª²ç¾**ã€‚æ­¤å¤–ï¼Œåœ¨è´­ç‰©ä¸ CMS ä¸¤ä¸ªå­ä»»åŠ¡ä¸Šï¼Œå–å¾—çš„åˆ†æ•°ä¸æ‰€æœ‰æ¨¡å‹ä¸­çš„æœ€ä½³æˆç»©ç›¸å½“ã€‚
- **AgentGym-RL-7B** çš„æ€»ä½“å¾—åˆ†**è¾¾åˆ° GPT-4o çš„æ°´å¹³**ã€‚

æ­¤å¤–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒScalingInter-RL åœ¨ RL ä¼˜åŒ–è¿‡ç¨‹ä¸­å±•ç°å‡ºæ›´åŠ **ç¨³å®šä¸”é«˜æ•ˆ**çš„è®­ç»ƒåŠ¨æ€ã€‚

![](./assets/searchqa_performance.jpg)

* æ›´é•¿è½®æ¬¡çš„è®¾ç½®åœ¨åˆæœŸé€šè¿‡æ›´ä¸°å¯Œçš„æ¢ç´¢è·å¾—æ›´é«˜å›æŠ¥ï¼Œä½†å®¹æ˜“å¿«é€Ÿå´©æºƒï¼›æ›´çŸ­è½®æ¬¡çš„è®¾ç½®æ›´ç¨³å®šä½†æ¢ç´¢ä¸è¶³ï¼Œå¯¼è‡´æ€§èƒ½ä¸Šé™å—é™ã€‚
* æˆ‘ä»¬çš„ ScalingInter-RL æ–¹æ³•ä¼š**é€æ­¥å¢åŠ äº¤äº’æ—¶åŸŸ**ï¼Œæœ€ç»ˆå®ç°**æ›´é«˜ä¸”æ›´é«˜æ•ˆ**çš„é•¿æœŸè¡¨ç°ã€‚

## è¿è¡Œæ•™ç¨‹

### ç¯å¢ƒå‡†å¤‡

æˆ‘ä»¬æ¨èä½¿ç”¨ CUDA 12.4ã€PyTorch 2.4 ä¸ Python 3.10ã€‚é¦–å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š
```sh
echo "Preparing environment for agentgym-rl..."
conda create -n agentgym-rl python==3.10 -y
conda activate agentgym-rl
pip3 install torch==2.4.0 --index-url https://download.pytorch.org/whl/cu124
# install flash-atten
FLASH_ATTENTION_URL="https://github.com/Dao-AILab/flash-attention/releases/download/v2.7.3/flash_attn-2.7.3+cu12torch2.4cxx11abiFALSE-cp310-cp310-linux_x86_64.whl"
FLASH_ATTENTION_NAME="flash_attn-2.7.3+cu12torch2.4cxx11abiFALSE-cp310-cp310-linux_x86_64.whl"
wget -q $FLASH_ATTENTION_URL -O $FLASH_ATTENTION_NAME
pip3 install $FLASH_ATTENTION_NAME
rm -f $FLASH_ATTENTION_NAME
# for RL
cd AgentGym-RL
pip3 install -e .
# for agentgym
echo "Preparing environment for agentenv..."
cd AgentGym/agentenv
pip3 install -e .
pip3 install transformers==4.51.3
```

### è®­ç»ƒ

å…³äº SFTã€DPO ä¸ AgentEvolï¼Œè¯·å‚è€ƒ [AgentGym](https://github.com/WooooDyy/AgentGym/tree/640f8bca6901a6a6d540ff61522b813988da47c4/) çš„ `README.md`ã€‚

RL è®­ç»ƒï¼š

**1. ç¯å¢ƒå‡†å¤‡**

ç¡®ä¿æ‰€éœ€ç¯å¢ƒå·²æ­å»ºå®Œæ¯•ï¼ˆè§ä¸Šæ–‡[ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)ï¼‰ã€‚

**2. æ•°æ®å‡†å¤‡**

ä» [Huggingface](https://huggingface.co/datasets/AgentGym/AgentGym-RL-Data-ID) ä¸‹è½½ AgentGym-RL-Data-ID æ•°æ®é›†ã€‚

**3. å¯åŠ¨ç¯å¢ƒæœåŠ¡ç«¯**

è¯·å‚è€ƒ [AgentGym](https://github.com/WooooDyy/AgentGym/tree/640f8bca6901a6a6d540ff61522b813988da47c4) çš„ `README.md` å¯åŠ¨ç¯å¢ƒæœåŠ¡ç«¯ã€‚

**4. å¼€å§‹è®­ç»ƒ**

å„ä»»åŠ¡çš„è®­ç»ƒç¤ºä¾‹è„šæœ¬ä½äº [examples/train](./examples/train)ï¼Œæ¶µç›– AgentGym-RL ä¸ ScalingInter-RLã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒè„šæœ¬ä¸­é…ç½®çš„è®­ç»ƒå‚æ•°ã€‚

```sh
bash webarena_train.sh
```

æ›´å¤šå‚æ•°è¯´æ˜å¯å‚è§ [verl æ–‡æ¡£](https://verl.readthedocs.io/en/latest/examples/config.html)ã€‚å…¶ä»–å…³é”®å‚æ•°ï¼š
* `data.max_prompt_length`ï¼šé¦–è½®ä»»åŠ¡æè¿°æç¤ºè¯çš„æœ€å¤§é•¿åº¦ã€‚
* `data.max_response_length`ï¼šäº¤äº’è½¨è¿¹çš„æœ€å¤§æ€» token æ•°ï¼ˆä¸å«ä»»åŠ¡æç¤ºè¯ï¼‰ã€‚
* `actor_rollout_ref.agentgym.task_name`ï¼šAgentGym çš„è®­ç»ƒä»»åŠ¡åã€‚
* `actor_rollout_ref.agentgym.env_addr`ï¼šAgentGym ç¯å¢ƒæœåŠ¡ç«¯çš„ URLã€‚
* `actor_rollout_ref.rollout.max_tokens`ï¼šå•è½®å›å¤çš„æœ€å¤§ token æ•°ã€‚
* `actor_rollout_ref.rollout.rollout_log_dir`ï¼šå­˜æ”¾ rollout è½¨è¿¹çš„ç›®å½•ã€‚
* `algorithm.rounds_ctrl.type`ï¼šæœ€å¤§äº¤äº’è½®æ•°çš„æ§åˆ¶ç­–ç•¥ï¼Œé€‰é¡¹ï¼š
  - `fixed`ï¼šå›ºå®šè½®æ•°ã€‚
  - `scaling_inter_stepwise`ï¼šæŒ‰å›ºå®šæ­¥é¢‘å¢åŠ è½®æ•°ã€‚
* `algorithm.rounds_ctrl.rounds`ï¼šå…è®¸çš„æœ€å¤§äº¤äº’è½®æ•°ã€‚
* `algorithm.rounds_ctrl.steps_scaling_inter`ï¼šå½“ä½¿ç”¨ `scaling_inter_stepwise` æ—¶ï¼Œæ¯å¤šå°‘è®­ç»ƒæ­¥å¢åŠ ä¸€æ¬¡æœ€å¤§è½®æ•°ã€‚

æ›´å¤šç»†èŠ‚è§ [AgentGym-RL/verl/agent_trainer/config/ppo_trainer.yaml](./AgentGym-RL/verl/agent_trainer/config/ppo_trainer.yaml)ã€‚

å¯åŠ¨ AgentGym-RL è®­ç»ƒï¼Œè®¾ç½®ï¼š

```sh
algorithm.rounds_ctrl.type=fixed \
algorithm.rounds_ctrl.rounds=15 \
```

å¯å‚è€ƒç¤ºä¾‹ [examples/train/AgentGym-RL/webarena_train.sh](./examples/train/AgentGym-RL/webarena_train.sh)ã€‚

å¯åŠ¨ ScalingInter-RL è®­ç»ƒï¼Œè®¾ç½®ï¼š

```sh
algorithm.rounds_ctrl.type=scaling_inter_stepwise\
algorithm.rounds_ctrl.steps_scaling_inter=100 \
algorithm.rounds_ctrl.rounds=[10,20,30] \
```

å¯å‚è€ƒç¤ºä¾‹ [examples/train/ScalingInter-RL/webarena_train.sh](./examples/train/ScalingInter-RL/webarena_train.sh)ã€‚

### è¯„æµ‹

**1. ç¯å¢ƒå‡†å¤‡**

ç¡®ä¿æ‰€éœ€ç¯å¢ƒå·²æ­å»ºå®Œæ¯•ï¼ˆè§ä¸Šæ–‡[ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)ï¼‰ã€‚

**2. æ•°æ®å‡†å¤‡**

ä» [Huggingface](https://huggingface.co/datasets/AgentGym/AgentGym-RL-Data-ID) ä¸‹è½½ AgentGym-RL-Data-ID æ•°æ®é›†ã€‚

**3. å¯åŠ¨ç¯å¢ƒæœåŠ¡ç«¯**

è¯·å‚è€ƒ [AgentGym](https://github.com/WooooDyy/AgentGym/tree/640f8bca6901a6a6d540ff61522b813988da47c4) çš„ `README.md` å¯åŠ¨ç¯å¢ƒæœåŠ¡ç«¯ã€‚

**4. å¼€å§‹è¯„æµ‹**

å„ä»»åŠ¡çš„è¯„æµ‹ç¤ºä¾‹è„šæœ¬ä½äº `examples/eval`ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒè¿™äº›è„šæœ¬ä¸­çš„è¯„æµ‹å‚æ•°é…ç½®ã€‚

è¦è¿è¡Œè¯„æµ‹ï¼Œå¯å‚è€ƒ `examples/eval/webarena_eval.sh`ï¼š

```sh
bash webarena_eval.sh
```

æ›´å¤šå‚æ•°è¯´æ˜å¯å‚è§ [verl æ–‡æ¡£](https://verl.readthedocs.io/en/latest/examples/config.html)ã€‚è¯¦è§ `AgentGym-RL/verl/agent_trainer/config/generation.yaml`ã€‚

### å¯è§†åŒ–ç”¨æˆ·ç•Œé¢

æ­å»ºè¯´æ˜è§[æ­¤å¤„](https://github.com/WooooDyy/AgentGym/tree/640f8bca6901a6a6d540ff61522b813988da47c4/env-visualization)ã€‚

## è‡´è°¢

AgentGym-RL çš„è®­ç»ƒæ¨¡å—åŸºäº [Verl](https://github.com/volcengine/verl) æ„å»ºï¼Œç¯å¢ƒæ¨¡å—åŸºäº [AgentGym](https://github.com/WooooDyy/AgentGym) æ„å»ºã€‚æ„Ÿè°¢ä¸Šè¿°é¡¹ç›®æä¾›çš„åŸºç¡€è®¾æ–½æ”¯æŒã€‚åŒæ—¶æ„Ÿè°¢ [TextCraft](https://github.com/archiki/ADaPT)ã€[BabyAI](https://github.com/mila-iqia/babyai)ã€[SciWorld](https://github.com/allenai/ScienceWorld)ã€[WebArena](https://github.com/web-arena-x/webarena)ã€[Search-R1](https://github.com/nyu-dl/dl4ir-searchQA) çš„å¼€æºè´¡çŒ®ã€‚

## è”ç³»

- zhxi22@m.fudan.edu.cn

## å¼•ç”¨

å¦‚æœä½ è§‰å¾— AgentGym-RL å¯¹ä½ çš„å·¥ä½œæœ‰å¸®åŠ©ï¼Œè¯·å¼•ç”¨ä»¥ä¸‹è®ºæ–‡ï¼

```
@misc{xi2025agentgymrltrainingllmagents,
      title={AgentGym-RL: Training LLM Agents for Long-Horizon Decision Making through Multi-Turn Reinforcement Learning}, 
      author={Zhiheng Xi and Jixuan Huang and Chenyang Liao and Baodai Huang and Honglin Guo and Jiaqi Liu and Rui Zheng and Junjie Ye and Jiazheng Zhang and Wenxiang Chen and Wei He and Yiwen Ding and Guanyu Li and Zehui Chen and Zhengyin Du and Xuesong Yao and Yufei Xu and Jiecao Chen and Tao Gui and Zuxuan Wu and Qi Zhang and Xuanjing Huang and Yu-Gang Jiang},
      year={2025},
      eprint={2509.08755},
      archivePrefix={arXiv},
      primaryClass={cs.LG},
      url={https://arxiv.org/abs/2509.08755}, 
}
```

```
@misc{xi2024agentgymevolvinglargelanguage,
      title={AgentGym: Evolving Large Language Model-based Agents across Diverse Environments}, 
      author={Zhiheng Xi and Yiwen Ding and Wenxiang Chen and Boyang Hong and Honglin Guo and Junzhe Wang and Dingwen Yang and Chenyang Liao and Xin Guo and Wei He and Songyang Gao and Lu Chen and Rui Zheng and Yicheng Zou and Tao Gui and Qi Zhang and Xipeng Qiu and Xuanjing Huang and Zuxuan Wu and Yu-Gang Jiang},
      year={2024},
      eprint={2406.04151},
      archivePrefix={arXiv},
      primaryClass={cs.AI},
      url={https://arxiv.org/abs/2406.04151}, 
}
```

<div align="center">
<img src="./assets/fudannlp_logo.png" height=50><img src="./assets/bytedance.jpg" height=50><img src="./assets/shanghai_innovation_institute_logo.png" height=50>
</div>


